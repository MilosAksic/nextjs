{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from \"react\";\nimport reducer from \"./reducer\";\n\nvar useFormik = function useFormik(props) {\n  if (!props.onSubmit) {\n    throw new Error(\"You forgot to pass on submit to useFormik\");\n  }\n\n  var _React$useReducer = React.useReducer(reducer, {\n    values: props.initialValues,\n    errors: {},\n    touched: {},\n    isSubmitting: false\n  }),\n      _React$useReducer2 = _slicedToArray(_React$useReducer, 2),\n      state = _React$useReducer2[0],\n      dispatch = _React$useReducer2[1];\n\n  React.useEffect(function () {\n    if (props.validate) {\n      var errors = props.validate(state.values);\n      dispatch({\n        type: \"SET_ERRORS\",\n        payload: errors\n      });\n    }\n  }, [state.values]);\n\n  var handleChange = function handleChange(fieldName) {\n    return function (event) {\n      event.persist();\n      dispatch({\n        type: \"SET_FIELD_VALIUE\",\n        payload: _defineProperty({}, fieldName, event.target.value)\n      });\n    };\n  };\n\n  var handleBlur = function handleBlur(fieldName) {\n    return function (event) {\n      dispatch({\n        type: \"SET_FIELD_TOUCHED\",\n        payload: _defineProperty({}, fieldName, true)\n      });\n    };\n  };\n\n  var getFieldProps = function getFieldProps(fieldName) {\n    return {\n      value: state.values[fieldName],\n      onChange: handleChange(fieldName),\n      onBlur: handleBlur(fieldName)\n    };\n  };\n\n  var handleSubmit =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(event) {\n      var errors;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              dispatch({\n                type: \"SUBMIT_ATTEMPT\"\n              }); //validate\n\n              errors = props.validate(state.values);\n\n              if (_Object$keys(errors).length) {\n                _context.next = 15;\n                break;\n              }\n\n              _context.prev = 4;\n              _context.next = 7;\n              return props.onSubmit(state.values);\n\n            case 7:\n              dispatch({\n                type: \"SUBMIT_SUCCES\"\n              });\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](4);\n              dispatch({\n                type: \"SUBMIT_FAILURE\",\n                payload: \"API mistake\"\n              });\n\n            case 13:\n              _context.next = 17;\n              break;\n\n            case 15:\n              dispatch({\n                type: \"SET_ERRORS\",\n                payload: errors\n              });\n              dispatch({\n                type: \"SUBMIT_FAILURE\",\n                payload: \"Submit failed\"\n              });\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[4, 10]]);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return _objectSpread({\n    handleChange: handleChange,\n    handleBlur: handleBlur,\n    handleSubmit: handleSubmit,\n    getFieldProps: getFieldProps\n  }, state);\n};\n\nexport default useFormik;","map":{"version":3,"sources":["C:/Front end/Praksa/next-vezba/next-example/components/useFormik.js"],"names":["React","reducer","useFormik","props","onSubmit","Error","useReducer","values","initialValues","errors","touched","isSubmitting","state","dispatch","useEffect","validate","type","payload","handleChange","fieldName","event","persist","target","value","handleBlur","getFieldProps","onChange","onBlur","handleSubmit","preventDefault","length"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport reducer from \"./reducer\";\r\n\r\nconst useFormik = props => {\r\n  if (!props.onSubmit) {\r\n    throw new Error(\"You forgot to pass on submit to useFormik\");\r\n  }\r\n  const [state, dispatch] = React.useReducer(reducer, {\r\n    values: props.initialValues,\r\n    errors: {},\r\n    touched: {},\r\n    isSubmitting: false\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    if (props.validate) {\r\n      const errors = props.validate(state.values);\r\n      dispatch({ type: \"SET_ERRORS\", payload: errors });\r\n    }\r\n  }, [state.values]);\r\n\r\n  const handleChange = fieldName => event => {\r\n    event.persist();\r\n    dispatch({\r\n      type: \"SET_FIELD_VALIUE\",\r\n      payload: { [fieldName]: event.target.value }\r\n    });\r\n  };\r\n\r\n  const handleBlur = fieldName => event => {\r\n    dispatch({\r\n      type: \"SET_FIELD_TOUCHED\",\r\n      payload: { [fieldName]: true }\r\n    });\r\n  };\r\n\r\n  const getFieldProps = fieldName => ({\r\n    value: state.values[fieldName],\r\n    onChange: handleChange(fieldName),\r\n    onBlur: handleBlur(fieldName)\r\n  });\r\n  const handleSubmit = async event => {\r\n    event.preventDefault();\r\n    dispatch({ type: \"SUBMIT_ATTEMPT\" });\r\n    //validate\r\n    const errors = props.validate(state.values);\r\n    if (!Object.keys(errors).length) {\r\n      try {\r\n        await props.onSubmit(state.values);\r\n        dispatch({ type: \"SUBMIT_SUCCES\" });\r\n      } catch (submitError) {\r\n        dispatch({ type: \"SUBMIT_FAILURE\", payload: \"API mistake\" });\r\n      }\r\n    } else {\r\n      dispatch({ type: \"SET_ERRORS\", payload: errors });\r\n      dispatch({ type: \"SUBMIT_FAILURE\", payload: \"Submit failed\" });\r\n    }\r\n    //mark each field as touched\r\n  };\r\n\r\n  return { handleChange, handleBlur, handleSubmit, getFieldProps, ...state };\r\n};\r\n\r\nexport default useFormik;\r\n"]},"metadata":{},"sourceType":"module"}